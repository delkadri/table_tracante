<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>S√©lection de dessin</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        .image-option {
            border: 2px solid transparent;
            padding: 10px;
            display: inline-block;
            margin: 10px;
            cursor: pointer;
        }
        .image-option.selected {
            border-color: blue;
            background-color: #e6f0ff;
        }
    </style>
    <script>
        let selectedFilename = "";

        function selectImage(filename, element) {
            document.getElementById('selectedImage').value = filename;
            selectedFilename = filename;

            // Supprimer la classe 'selected' de tous
            const options = document.querySelectorAll('.image-option');
            options.forEach(opt => opt.classList.remove('selected'));

            // Ajouter la classe 'selected' √† l'√©l√©ment cliqu√©
            element.classList.add('selected');

            // Afficher le bouton "T√©l√©charger"
            document.getElementById("download-section").style.display = "block";
        }

        function enableDrawButton() {
            document.getElementById('draw-button').disabled = false;
            document.getElementById('status').innerText = "‚úÖ Image t√©l√©charg√©e avec succ√®s !";
        }
    </script>
</head>
<body>
    <div style="position: absolute; top: 10px; right: 10px;">
        <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Logo" style="height: 130px;">
    </div>
    <h1>Table Tra√ßante</h1>
    
    <h2>S√©lectionnez une image √† dessiner</h2>

    <form id="imageForm" method="POST">
        <input type="hidden" id="selectedImage" name="example">

        <div class="image-option" onclick="selectImage('coeur.svg', this)">‚ù§Ô∏è C≈ìur</div>
        <div class="image-option" onclick="selectImage('triangle.svg', this)">üî∫ Triangle</div>
        <div class="image-option" onclick="selectImage('spirale.svg', this)">üåÄ Spirale</div>

        <div id="download-section" style="display:none; margin-top: 20px;">
            <button type="submit" name="confirm_selection" value="1">T√©l√©charger l'image s√©lectionn√©e</button>
        </div>
    </form>

    <h3>Ou t√©l√©versez votre propre fichier SVG :</h3>
    <form method="POST" enctype="multipart/form-data">
        <input type="file" name="file" accept=".svg" required>
        <button type="submit" name="upload">T√©l√©verser</button>
    </form>

    {% if downloaded %}
    <script>enableDrawButton();</script>
    {% endif %}

    <p id="status">{% if downloaded %}‚úÖ Image t√©l√©charg√©e avec succ√®s !{% endif %}</p>

    <form method="POST">
        <input type="hidden" name="draw" value="1">
        <button id="draw-button" type="submit" style="background-color: red; color: white; padding: 12px 24px; font-size: 16px; border: none; border-radius: 6px; cursor: pointer; margin-top: 30px" {% if not downloaded %}disabled{% endif %}>
            üé® Dessiner
        </button>
    </form>
</body>
</html>
